{"ast":null,"code":"import _slicedToArray from \"/home/hab23/Documents/coliving/development/hab_gestion_coliving_ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/home/hab23/Documents/coliving/development/hab_gestion_coliving_ui/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/hab23/Documents/coliving/development/hab_gestion_coliving_ui/src/PrivateGuest/UserEditProfile.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst useEditProfile = () => {\n  const _useParams = useParams(),\n        id = _useParams.id;\n\n  const dispatch = useDispatch();\n  const token = useSelector(s => s.user && s.user.token);\n  const user = useSelector(s => s.user);\n  useEffect(() => {\n    const handler = field => e => setUser(_objectSpread({}, user, {\n      [field]: e.target.value\n    }));\n\n    const setUser = user => dispatch({\n      type: 'editprofile',\n      user\n    });\n\n    fetch('http://localhost:3300/users/' + id), {\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }.then(r => r.json()).then(data => setUser(data))\n    }, [id, token, dispatch];\n    return user;\n  });\n  const history = useHistory();\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isError = _useState2[0],\n        setError = _useState2[1];\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(false);\n\n    try {\n      const ret = await fetch('http://localhost:3300/users/' + id, {\n        method: 'PUT',\n        body: JSON.stringify(user),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      await ret.json();\n      history.push(`/users/${id}`);\n    } catch (err) {\n      console.warn('Error:', err);\n      setError(true);\n    }\n  };\n};\n\nconst EditProfile = () => {\n  const editProfile = useEditProfile();\n  if (!user) return 'Loading ...';\n  return React.createElement(\"form\", {\n    id: \"signup\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, \"Nombre:\", React.createElement(\"input\", {\n    name: \"name\",\n    required: true,\n    value: user.name,\n    onChange: handler('name'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Apellido:\", React.createElement(\"input\", {\n    name: \"surname\",\n    required: true,\n    value: user.surname,\n    onChange: handler('surname'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Email:\", React.createElement(\"input\", {\n    name: \"email\",\n    required: true,\n    value: user.email,\n    onChange: handler('email'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Profesi\\xF3n:\", React.createElement(\"input\", {\n    name: \"profession\",\n    required: true,\n    value: user.profession,\n    onChange: handler('profession'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Pa\\xEDs:\", React.createElement(\"textarea\", {\n    name: \"country\",\n    required: true,\n    value: user.country,\n    onChange: handler('country'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"Guardar\"), isError && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Error, please try again\"));\n};\n\nexport default EditProfile;","map":{"version":3,"sources":["/home/hab23/Documents/coliving/development/hab_gestion_coliving_ui/src/PrivateGuest/UserEditProfile.js"],"names":["React","useState","useEffect","useHistory","useParams","useSelector","useDispatch","useEditProfile","id","dispatch","token","s","user","handler","field","e","setUser","target","value","type","fetch","headers","then","r","json","data","history","isError","setError","handleSubmit","preventDefault","ret","method","body","JSON","stringify","push","err","console","warn","EditProfile","editProfile","name","surname","email","profession","country"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { useSelector, useDispatch } from 'react-redux'\n\nconst useEditProfile = () => {\n    const { id } = useParams()\n    const dispatch = useDispatch()\n    const token = useSelector(s => s.user && s.user.token)\n    const user = useSelector(s => s.user)\n    \n    useEffect(() => {\n        const handler = field => e => setUser({ ...user, [field]: e.target.value })\n        const setUser = user => dispatch({ type: 'editprofile', user })\n        \n        fetch('http://localhost:3300/users/' + id), {\n            headers: {\n                'Authorization': 'Bearer ' + token\n            }\n                .then(r => r.json())\n                .then(data => setUser(data))\n        }, [id, token, dispatch]\n    return user\n})\n\n\nconst history = useHistory()\nconst [isError, setError] = useState(false)\n\nconst handleSubmit = async (e) => {\n    e.preventDefault()\n    setError(false)\n    try {\n        const ret = await fetch('http://localhost:3300/users/' + id, {\n            method: 'PUT',\n            body: JSON.stringify(user),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n        await ret.json()\n        history.push(`/users/${id}`)\n    } catch (err) {\n        console.warn('Error:', err)\n        setError(true)\n    }\n}\n}\n\nconst EditProfile = () => {\n    const editProfile = useEditProfile()\n    if (!user) return 'Loading ...'\n    return (\n        <form id=\"signup\" onSubmit={handleSubmit}>\n            <label>\n                Nombre:\n                <input name=\"name\" required value={user.name} onChange={handler('name')} />\n            </label>\n            <label>\n                Apellido:\n                <input name=\"surname\" required value={user.surname} onChange={handler('surname')} />\n            </label>\n            <label>\n                Email:\n                <input name=\"email\" required value={user.email} onChange={handler('email')} />\n            </label>\n            <label>\n                Profesión:\n                <input name=\"profession\" required value={user.profession} onChange={handler('profession')} />\n            </label>\n            <label>\n                País:\n                <textarea name=\"country\" required value={user.country} onChange={handler('country')} />\n            </label>\n            <button>Guardar</button>\n            {isError && <div>Error, please try again</div>}\n        </form>\n    )\n}\n\nexport default EditProfile\n"]},"metadata":{},"sourceType":"module"}